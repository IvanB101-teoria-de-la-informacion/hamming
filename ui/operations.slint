import { Button, HorizontalBox , ScrollView , ComboBox, CheckBox} from "std-widgets.slint";
import { State } from "state.slint";

component OpButton inherits Button {
    width: 150px;
    height: 30px;
}

export component Operations inherits Rectangle {
    in-out property <[string]> errors;
    in-out property <[bool]> inProgress;

    VerticalLayout {
        padding: 15px;
        alignment: space-around;

        hamming := HorizontalLayout {
            alignment: start;

            OpButton {
                text: "Proteger";
                clicked => { State.protect(combo-box.current-value) }
            }
            Text {
                vertical-alignment: center;
                text: "  Tamaño de bloque: ";
            }
            combo-box := ComboBox {
                width: 100px;
                current-value: State.block-size;
                model: ["32", "2048", "65536"];
                selected => {
                    State.block-size = self.current-value;
                }
            }
            if errors[0] != "" : Text {
                text: errors[0];
            }
        }
        dehamming := HorizontalLayout {
            alignment: start;
            OpButton {
                text: "Desproteger";
                clicked => { State.desprotect(State.correct) }
            }
            Text {
                text: "   ";
            }
            correct := CheckBox { 
                text: "  Corrección ";
                checked: State.correct;
                toggled => {
                    State.correct = !State.correct
                }
            }
        }
        HorizontalLayout {
            alignment: start;
            
            OpButton {
                text: "Corromper";
                clicked => { State.corrupt(State.probability) }
            }
        }
        OpButton {
            text: "Comprimir";
            clicked => { State.compress() }
        }
        OpButton {
            text: "Descomprimir";
            clicked => { State.decompress() }
        }
    }
}
